#! /usr/bin/env python3.6
import rospy
import sys
from wifi_localization import collector
from wifi_localization import utils 

if __name__ == "__main__":
    rospy.init_node('rssi_collect_node')
    try:
        ns = rospy.get_name()
        rssi_collector = collector.Collector()
        if rospy.get_param(ns + "/simulation_mode", False):
            option = rospy.get_param(ns + "/simulation_option", False)
            if option:
                parameter = [rospy.get_param(ns + "/input_topic", "default_topic")]
            else:
                parameter = [rospy.get_param(ns + "/parent_frame", "default_parent"), rospy.get_param(ns + "/child_frame", "default_parent")]
            thread = utils.startSimulator(parameter, option)
            
        while not rospy.is_shutdown():
            rospy.sleep(0.01)

    except KeyboardInterrupt:
        sys.exit()